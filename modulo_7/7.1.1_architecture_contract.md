# Architecture Contract

**Tiempo estimado**: 30 minutos
**Nivel**: Intermedio-Avanzado
**Prerrequisitos**: Transition Architectures (6.2.3)

---

## Por que importa este subtema?

El Architecture Contract es el mecanismo formal que conecta la arquitectura con su implementacion. Sin contratos claros, los proyectos de implementacion pueden desviarse de la arquitectura aprobada, resultando en deuda tecnica y soluciones inconsistentes.

---

## Que es un Architecture Contract

> "Un acuerdo conjunto entre stakeholders, sponsors y equipos de desarrollo que formaliza los compromisos y obligaciones respecto a la arquitectura acordada."

**Proposito**:
- Formalizar compromisos de arquitectura
- Establecer criterios de aceptacion
- Definir responsabilidades
- Crear base para compliance reviews

---

## Tipos de Contratos

```
ARCHITECTURE CONTRACTS
|
+-- Architecture Definition Contract
|   (Entre Arquitectura y Sponsors)
|   "Que arquitectura se va a construir"
|
+-- Architecture Implementation Contract
|   (Entre Arquitectura y Desarrollo)
|   "Como se va a implementar"
|
+-- Service Level Agreement (SLA)
    (Entre IT y Negocio)
    "Que niveles de servicio se garantizan"
```

---

## Estructura del Architecture Contract

### Template Basico

```markdown
# Architecture Contract
# [Nombre del Proyecto/Iniciativa]

## 1. Identificacion

| Campo | Valor |
|-------|-------|
| ID | AC-2026-001 |
| Version | 1.0 |
| Estado | Borrador / Aprobado / Vigente |
| Fecha efectiva | 2026-03-01 |
| Fecha revision | 2026-09-01 |

## 2. Partes Involucradas

### Autoridad de Arquitectura
| Rol | Nombre | Responsabilidad |
|-----|--------|-----------------|
| Chief Architect | Maria Lopez | Aprobacion final |
| Domain Architect | Juan Perez | Revision tecnica |
| Architecture Board | [Comite] | Governance |

### Equipo de Implementacion
| Rol | Nombre | Responsabilidad |
|-----|--------|-----------------|
| Project Manager | Ana Garcia | Entrega del proyecto |
| Tech Lead | Carlos Ruiz | Implementacion tecnica |
| QA Lead | Laura Martinez | Aseguramiento de calidad |

### Sponsors
| Rol | Nombre | Responsabilidad |
|-----|--------|-----------------|
| Business Sponsor | Pedro Sanchez | Funding y prioridades |
| IT Sponsor | Sofia Mendez | Recursos tecnicos |

## 3. Alcance de la Arquitectura

### Arquitectura Acordada
- Documento de referencia: [Architecture Definition Document v2.1]
- Viewpoints aplicables: [Lista de viewpoints]
- Dominios cubiertos: Business, Data, Application, Technology

### Principios Aplicables
| ID | Principio | Aplicacion en este proyecto |
|----|-----------|------------------------------|
| P-01 | API-First | Todas las integraciones via REST API |
| P-02 | Cloud-Native | Despliegue en containers EKS |
| P-03 | Data Sovereignty | Datos en region local |

### Building Blocks Requeridos
| Tipo | Building Block | Version | Obligatorio |
|------|----------------|---------|-------------|
| SBB | API Gateway | Kong 3.x | Si |
| SBB | Message Broker | Kafka 3.4 | Si |
| SBB | Database | PostgreSQL 15 | Si |
| ABB | Authentication | OAuth 2.0/OIDC | Si |

## 4. Compromisos

### Compromisos del Equipo de Arquitectura
- Disponibilidad para consultas tecnicas
- Revision de disenos antes de implementacion
- Participacion en Design Reviews
- Actualizacion del repositorio de arquitectura

### Compromisos del Equipo de Implementacion
- Seguir principios de arquitectura documentados
- Usar building blocks especificados
- Notificar desviaciones propuestas
- Participar en compliance reviews

### Compromisos de Sponsors
- Financiamiento segun presupuesto aprobado
- Escalacion de conflictos
- Disponibilidad para decisiones de negocio

## 5. Criterios de Aceptacion

### Arquitectura
| Criterio | Medicion | Umbral |
|----------|----------|--------|
| Conformidad con principios | Checklist | 100% |
| Uso de building blocks | Auditoria | 100% obligatorios |
| Cobertura de documentacion | Entregables | Todos completados |
| Seguridad | Penetration test | 0 criticos/altos |

### Calidad
| Criterio | Medicion | Umbral |
|----------|----------|--------|
| Code coverage | Automatizado | >= 80% |
| Vulnerabilidades | SAST/DAST | 0 criticas |
| Performance | Load test | < 200ms p95 |

## 6. Proceso de Cambios

### Cambios Menores
- Definicion: No afectan principios ni building blocks
- Aprobacion: Domain Architect
- Timeline: 5 dias habiles

### Cambios Mayores
- Definicion: Afectan arquitectura acordada
- Aprobacion: Architecture Board
- Timeline: Siguiente sesion del Board (quincenal)

### Dispensas (Waivers)
- Proceso: Request formal con justificacion
- Aprobacion: Chief Architect + Sponsor
- Registro: Architecture Repository

## 7. Compliance Reviews

### Reviews Planificados
| Fase | Fecha | Tipo |
|------|-------|------|
| Diseno | 2026-04-15 | Design Review |
| Sprint 3 | 2026-05-30 | Code Review |
| Pre-produccion | 2026-07-15 | Architecture Assessment |
| Post Go-Live | 2026-08-15 | Compliance Audit |

### Criterios de Review
[Ver documento de Compliance Review Process]

## 8. Escalacion

### Niveles de Escalacion
| Nivel | Responsable | Situacion |
|-------|-------------|-----------|
| L1 | Domain Architect | Consultas tecnicas |
| L2 | Chief Architect | Desviaciones propuestas |
| L3 | Architecture Board | Conflictos no resueltos |
| L4 | CIO/CTO | Decisiones estrategicas |

## 9. Firmas

| Parte | Nombre | Firma | Fecha |
|-------|--------|-------|-------|
| Autoridad de Arquitectura | | | |
| Project Manager | | | |
| Business Sponsor | | | |
| IT Sponsor | | | |
```

---

## Ejemplo Practico: Contrato para Migracion CRM

```markdown
# Architecture Contract
# Migracion CRM Siebel a Salesforce

## Alcance
Migracion completa del sistema CRM de Siebel a Salesforce,
incluyendo datos historicos, integraciones y personalizaciones.

## Principios Obligatorios

| Principio | Aplicacion |
|-----------|------------|
| Cloud-First | Salesforce Cloud (no on-premise) |
| API-First | Todas las integraciones via REST/SOAP |
| Single Source of Truth | Salesforce es master de cliente |
| No Customization | Preferir configuracion sobre codigo |

## Building Blocks Requeridos

### Integracion
- MuleSoft Anypoint (plataforma corporativa)
- Salesforce Connect para SAP
- Heroku para extensiones

### Seguridad
- Okta para SSO (SAML 2.0)
- Salesforce Shield para encriptacion
- Data Mask para ambientes no-prod

### Datos
- Informatica Cloud para ETL/migracion
- Salesforce Data Cloud para unificacion

## Compromisos Especificos

### Arquitectura garantiza:
1. Modelo de datos target documentado antes de Sprint 1
2. Patrones de integracion definidos para cada sistema
3. Revision de cada integracion antes de desarrollo
4. Soporte durante testing de integracion

### Implementacion garantiza:
1. No crear objetos custom sin aprobacion
2. Usar unicamente flows (no Apex) salvo excepcion
3. Code review obligatorio para todo Apex
4. Documentar todas las formulas complejas

### Negocio garantiza:
1. Usuarios disponibles para UAT
2. Decisiones de data cleansing en 48h
3. Sign-off de cada fase en 5 dias

## Criterios de Aceptacion

| Area | Criterio | Umbral |
|------|----------|--------|
| Datos | Migracion completa | 100% clientes activos |
| Datos | Calidad post-migracion | < 1% errores |
| Integraciones | Disponibilidad | 99.5% |
| Integraciones | Latencia | < 2s para sync |
| Adopcion | Usuarios capacitados | 100% antes de go-live |

## Waivers Pre-aprobados

| Waiver | Justificacion | Condicion |
|--------|---------------|-----------|
| Apex para CPQ | Logica de pricing compleja | Code review + tests |
| Objeto custom: Legacy_ID | Trazabilidad migracion | Eliminar post-migracion |
```

---

## Gestion del Contrato

### Ciclo de Vida

```
+----------+     +----------+     +----------+     +----------+
| BORRADOR |---->| REVISION |---->| APROBADO |---->| VIGENTE  |
+----------+     +----------+     +----------+     +----------+
                      |                                  |
                      v                                  v
                 +----------+                      +----------+
                 | RECHAZADO|                      | CERRADO  |
                 +----------+                      +----------+
```

### Estados

| Estado | Descripcion |
|--------|-------------|
| Borrador | En elaboracion |
| Revision | Siendo revisado por partes |
| Aprobado | Firmado, no vigente aun |
| Vigente | Activo, aplicable |
| Cerrado | Proyecto terminado |
| Rechazado | No aprobado |

---

## Buenas Practicas

### Hacer

- Involucrar a todas las partes temprano
- Ser especifico en criterios de aceptacion
- Definir proceso de cambios claro
- Revisar el contrato periodicamente
- Registrar todas las dispensas

### Evitar

- Contratos demasiado genericos
- Criterios no medibles
- Omitir proceso de escalacion
- Firmar sin leer
- Ignorar el contrato una vez firmado

---

## Integracion con ADM

```
ADM PHASE                    CONTRACT ACTIVITY
-----------                  -----------------
Phase A (Vision)       -->   Identificar partes, alcance inicial
Phase B-D (Domains)    -->   Definir principios, building blocks
Phase E (Opportunities) -->  Refinar criterios de aceptacion
Phase F (Migration)    -->   Finalizar compromisos, fechas
Phase G (Implementation) --> Contrato VIGENTE, compliance reviews
Phase H (Change)       -->   Gestionar cambios al contrato
```

---

## Resumen

| Concepto | Descripcion |
|----------|-------------|
| Architecture Contract | Acuerdo formal sobre arquitectura |
| Partes | Arquitectura, Implementacion, Sponsors |
| Compromisos | Obligaciones de cada parte |
| Criterios de aceptacion | Como se mide el cumplimiento |
| Cambios y waivers | Proceso para desviaciones |

**Siguiente subtema**: Compliance Reviews (7.1.2)
