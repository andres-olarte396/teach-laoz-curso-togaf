# Matrices de Trazabilidad

**Tiempo estimado**: 25 minutos
**Nivel**: Intermedio
**Prerrequisitos**: Plataformas y Cloud (5.1.3)

---

## Por que importa este subtema?

Las matrices de trazabilidad conectan los diferentes niveles de la arquitectura. Permiten responder preguntas como:

- Si cambia este proceso, que aplicaciones se afectan?
- Si falla este servidor, que capacidades de negocio se impactan?
- Este requisito, esta cubierto por que componentes?

Sin trazabilidad, la arquitectura es un conjunto de documentos desconectados.

---

## Que es Trazabilidad

> "La capacidad de relacionar elementos de diferentes niveles o dominios de arquitectura, permitiendo analisis de impacto y verificacion de cobertura."

**Direcciones**:
- **Hacia arriba**: De tecnologia a negocio (que soporta esto?)
- **Hacia abajo**: De negocio a tecnologia (como se implementa esto?)
- **Horizontal**: Entre elementos del mismo nivel (como se relacionan?)

---

## Matrices Clave de TOGAF

### 1. Business Service/Function Matrix

Relaciona servicios de negocio con funciones organizacionales.

| Servicio de Negocio | Ventas | Marketing | Operaciones | Finanzas |
|---------------------|--------|-----------|-------------|----------|
| Gestion de Clientes | P | S | - | - |
| Procesamiento Pedidos | P | - | S | S |
| Facturacion | - | - | S | P |
| Soporte al Cliente | S | - | P | - |

**P** = Principal (responsable), **S** = Secundario (participa)

---

### 2. Application/Business Function Matrix

Relaciona aplicaciones con funciones de negocio.

| Aplicacion | Gestion Clientes | Pedidos | Inventario | Finanzas |
|------------|------------------|---------|------------|----------|
| Salesforce CRM | X | X | - | - |
| SAP ERP | - | X | X | X |
| Portal E-commerce | X | X | - | - |
| Power BI | X | X | X | X |

---

### 3. Application/Technology Matrix

Relaciona aplicaciones con componentes tecnologicos.

| Aplicacion | PostgreSQL | MongoDB | Kafka | EKS | AWS Lambda |
|------------|------------|---------|-------|-----|------------|
| Order Service | X | - | X | X | - |
| Customer Service | X | - | X | X | - |
| Analytics | - | X | X | - | X |
| Portal Web | - | - | - | X | - |

---

### 4. Capability/Application Matrix

Relaciona capacidades de negocio con aplicaciones que las soportan.

| Capacidad (L2) | Salesforce | SAP | Portal | BI |
|----------------|------------|-----|--------|-----|
| Adquisicion de Clientes | X | - | X | X |
| Gestion de Oportunidades | X | - | - | X |
| Procesamiento de Pedidos | X | X | X | X |
| Gestion de Inventario | - | X | - | X |
| Facturacion | - | X | - | X |
| Analisis de Ventas | X | - | - | X |

---

## Matriz Completa de Trazabilidad

### Multi-nivel (TOGAF Style)

```
+------------------+------------------+------------------+------------------+
|    NEGOCIO       |      DATOS       |   APLICACIONES   |   TECNOLOGIA     |
+------------------+------------------+------------------+------------------+
|                  |                  |                  |                  |
| Capacidad:       | Entidad:         | App:             | Servicio:        |
| Gestion de    -->| Cliente       -->| Salesforce    -->| PostgreSQL       |
| Clientes         |                  | CRM              | Okta             |
|                  |                  |                  | EKS              |
+------------------+------------------+------------------+------------------+
|                  |                  |                  |                  |
| Proceso:         | Entidad:         | App:             | Servicio:        |
| Cotizacion    -->| Cotizacion    -->| Quote         -->| Kafka            |
|                  | Producto         | Service          | Redis            |
|                  | Precio           | SAP              | API Gateway      |
+------------------+------------------+------------------+------------------+
```

---

## Construyendo la Matriz

### Paso 1: Definir elementos por capa

```markdown
## Inventario de Elementos

### Capa de Negocio
- Capacidades: 25 (L2)
- Procesos: 40
- Funciones: 8

### Capa de Datos
- Entidades: 30
- Dominios: 6

### Capa de Aplicaciones
- Aplicaciones: 45

### Capa de Tecnologia
- Servicios: 60
```

### Paso 2: Establecer relaciones

Para cada par de capas, documentar que elementos se relacionan.

### Paso 3: Validar cobertura

- Hay capacidades sin aplicaciones? (Gap)
- Hay aplicaciones sin capacidades? (Posible redundancia)
- Hay requisitos sin componentes? (No implementado)

---

## Uso para Analisis de Impacto

### Escenario: Falla en PostgreSQL

```
TECNOLOGIA: PostgreSQL falla
            |
            v
APLICACIONES: Cuales usan PostgreSQL?
            - Order Service
            - Customer Service
            - Inventory Service
            |
            v
NEGOCIO: Que capacidades se impactan?
            - Procesamiento de Pedidos
            - Gestion de Clientes
            - Gestion de Inventario
            |
            v
IMPACTO: Critico - afecta capacidades core
ACCION: Failover a replica, notificar stakeholders
```

### Escenario: Cambio en proceso de negocio

```
NEGOCIO: Proceso de cotizacion cambia
         (nuevo paso de aprobacion)
            |
            v
APLICACIONES: Cuales soportan cotizacion?
            - Quote Service
            - Salesforce (oportunidades)
            |
            v
DATOS: Que entidades se afectan?
            - Cotizacion (nuevo campo: aprobador)
            - Workflow (nuevo estado)
            |
            v
TECNOLOGIA: Que servicios se modifican?
            - Quote Service (EKS)
            - PostgreSQL (schema change)
            - Kafka (nuevo evento)
```

---

## Artefacto TOGAF

### Traceability Report

```markdown
# Traceability Report

## Metadata
- Version: 1.0
- Fecha: 2026-01-28
- Alcance: Dominio Comercial

## Resumen de Cobertura

| Capa | Total Elementos | Trazados | Cobertura |
|------|-----------------|----------|-----------|
| Capacidades | 25 | 25 | 100% |
| Procesos | 40 | 38 | 95% |
| Aplicaciones | 45 | 45 | 100% |
| Tecnologia | 60 | 55 | 92% |

## Gaps Identificados

| ID | Tipo | Elemento | Descripcion |
|----|------|----------|-------------|
| G-001 | Capacidad sin App | Analisis Predictivo | No hay app que soporte |
| G-002 | Proceso sin Sistema | Escalacion VIP | Manual, sin sistema |

## Redundancias Identificadas

| Elemento | Soportado por | Recomendacion |
|----------|---------------|---------------|
| Gestion Contactos | Salesforce, SAP, Excel | Consolidar en Salesforce |

## Matriz Principal
[Adjuntar matriz de trazabilidad completa]
```

---

## Herramientas

| Herramienta | Tipo | Capacidad de Trazabilidad |
|-------------|------|---------------------------|
| Sparx EA | Enterprise | Nativa, matrices automaticas |
| LeanIX | SaaS | Relaciones entre activos |
| Ardoq | SaaS | Grafos de dependencias |
| Excel | Manual | Matrices manuales |
| Archi | Open source | Relaciones ArchiMate |

---

## Resumen

| Concepto | Descripcion |
|----------|-------------|
| Trazabilidad | Conexion entre elementos de diferentes capas |
| Matrices | Formato tabular para documentar relaciones |
| Analisis de impacto | Usar trazabilidad para evaluar cambios |
| Cobertura | Verificar que todo esta conectado |
| Gaps | Elementos sin conexion = problemas |

**Siguiente subtema**: Analisis de Impacto Cross-Domain (5.2.2)
