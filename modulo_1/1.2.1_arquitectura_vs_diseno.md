# Arquitectura vs Diseno

**Tiempo estimado**: 20 minutos
**Nivel**: Intermedio
**Prerrequisitos**: Terminologia Clave TOGAF (1.1.3)

---

## Por que importa este subtema?

Confundir arquitectura con diseno es uno de los errores mas costosos en proyectos de TI. Cuando un arquitecto se involucra en detalles de diseno, pierde la vision del sistema completo. Cuando un disenador toma decisiones arquitectonicas sin autoridad, genera inconsistencias que cuestan millones corregir.

Esta distincion tambien afecta la gobernanza: las decisiones arquitectonicas requieren un proceso de aprobacion diferente (mas riguroso, con mas stakeholders) que las decisiones de diseno.

---

## Definiciones Contrastadas

### Arquitectura

> "La estructura fundamental de un sistema, incorporada en sus componentes, sus relaciones entre si y con el entorno, y los principios que gobiernan su diseno y evolucion a lo largo del tiempo." - TOGAF

**Caracteristicas**:
- Decisiones de **alto impacto** que afectan multiples componentes
- Costosas de cambiar una vez implementadas
- Requieren vision del sistema completo
- Afectan atributos de calidad (escalabilidad, seguridad, mantenibilidad)

### Diseno

> "La especificacion detallada de como se implementara cada componente, incluyendo algoritmos, estructuras de datos, interfaces internas, y comportamientos especificos."

**Caracteristicas**:
- Decisiones **locales** dentro de un componente
- Relativamente faciles de cambiar
- Requieren conocimiento profundo del componente especifico
- Afectan funcionalidad y rendimiento local

---

## Criterios de Distincion

| Criterio | Arquitectura | Diseno |
|----------|--------------|--------|
| **Alcance** | Sistema completo / empresa | Componente individual |
| **Horizonte** | Largo plazo (anos) | Corto/medio plazo (sprints/meses) |
| **Costo de cambio** | Alto (millones, meses) | Moderado (dias/semanas) |
| **Tomador de decision** | Arquitecto + Comite | Tech Lead / Desarrollador |
| **Abstraccion** | Alto (que y por que) | Detallado (como) |
| **Reversibilidad** | Baja | Alta |

---

## Ejemplos Practicos

### Ejemplo 1: Sistema de E-commerce

| Decision | Tipo | Justificacion |
|----------|------|---------------|
| "Usaremos arquitectura de microservicios" | **Arquitectura** | Afecta todo el sistema, costoso cambiar |
| "El servicio de carrito se comunicara via gRPC" | **Arquitectura** | Afecta multiples servicios |
| "El algoritmo de recomendacion usara collaborative filtering" | **Diseno** | Local al servicio de recomendaciones |
| "La clase CartItem tendra campos id, productId, quantity, price" | **Diseno** | Detalle de implementacion |

### Ejemplo 2: Aplicacion Bancaria

| Decision | Tipo | Justificacion |
|----------|------|---------------|
| "Los datos de clientes estaran en una base de datos centralizada" | **Arquitectura** | Afecta integracion de todos los sistemas |
| "Usaremos PostgreSQL como motor de base de datos" | **Arquitectura** | Dificil de cambiar, afecta toda la plataforma |
| "La tabla customers tendra indices en email y customer_id" | **Diseno** | Optimizacion local, facil de ajustar |
| "Las consultas de saldo usaran stored procedures" | **Diseno** | Decision de implementacion del modulo |

---

## La Zona Gris

Algunas decisiones estan en el limite. La regla practica:

> **Si cambiar la decision requiere modificar mas de un equipo/componente, probablemente es arquitectura.**

### Ejemplos de zona gris

| Decision | Depende de... |
|----------|---------------|
| "Usaremos React para el frontend" | Si es solo un frontend: Diseno. Si afecta multiples apps: Arquitectura |
| "Logs en formato JSON" | Si es un servicio: Diseno. Si es estandar de toda la plataforma: Arquitectura |
| "Versionado de APIs con prefijo /v1/" | Arquitectura (afecta todos los consumidores) |

---

## Implicaciones para el Arquitecto

### Que debe hacer un arquitecto

- Definir estructura de alto nivel
- Establecer estandares y principios
- Tomar decisiones que afectan multiples componentes
- Evaluar trade-offs de atributos de calidad
- Revisar conformidad arquitectonica

### Que NO debe hacer un arquitecto

- Dictar detalles de implementacion
- Elegir nombres de variables o clases
- Definir logica de negocio especifica
- Microgestionar decisiones de equipo

```
TORRE DE MARFIL vs ARQUITECTO EFECTIVO
======================================

Torre de Marfil (anti-patron):
  - Crea diagramas bonitos
  - Nunca habla con desarrolladores
  - Ignora restricciones reales
  - Sus decisiones no se implementan

Arquitecto Efectivo:
  - Define decisiones de alto impacto
  - Colabora con equipos de desarrollo
  - Entiende restricciones tecnicas
  - Valida que sus decisiones funcionen
```

---

## Resumen Visual

```
                    ARQUITECTURA
                         |
    +--------------------+--------------------+
    |                    |                    |
    v                    v                    v
"Microservicios"   "Event-driven"    "PostgreSQL como
                                      base central"
    |                    |                    |
    +--------------------+--------------------+
                         |
                    DISENO DE CADA
                     COMPONENTE
                         |
    +--------------------+--------------------+
    |                    |                    |
    v                    v                    v
"CartService      "Schema de        "Algoritmo de
 usa gRPC"         eventos Avro"     busqueda A*"
```

---

## Resumen

| Pregunta | Arquitectura | Diseno |
|----------|--------------|--------|
| Que define? | Estructura del sistema | Implementacion de componentes |
| Quien decide? | Arquitecto + Governance | Tech Lead + Equipo |
| Que pasa si cambio? | Impacto alto, costoso | Impacto local, manejable |
| Nivel de detalle? | Conceptual | Especifico |

**Siguiente subtema**: Baseline vs Target Architecture (1.2.2)
