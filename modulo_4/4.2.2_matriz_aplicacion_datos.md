# Matriz de Interaccion Aplicacion-Datos

**Tiempo estimado**: 25 minutos
**Nivel**: Intermedio
**Prerrequisitos**: Inventario de Aplicaciones (4.2.1)

---

## Por que importa este subtema?

La matriz aplicacion-datos (CRUD matrix) responde una pregunta critica: **que aplicaciones crean, leen, actualizan y eliminan que datos?**

Esta matriz es esencial para:
- Identificar el sistema maestro de cada dato
- Planificar integraciones
- Entender dependencias
- Disenar estrategia de migracion

---

## Que es la Matriz CRUD

> "Una matriz que muestra la relacion entre aplicaciones y entidades de datos, indicando las operaciones (Create, Read, Update, Delete) que cada aplicacion realiza sobre cada entidad."

```
                    ENTIDADES DE DATOS
                    Cliente  Producto  Pedido  Factura
              +--------+--------+--------+--------+
Salesforce    |   C    |   R    |   CR   |   R    |
              +--------+--------+--------+--------+
SAP ERP       |   R    |   C    |   RU   |   C    |
APLICACIONES  +--------+--------+--------+--------+
Portal Web    |   C    |   R    |   C    |   R    |
              +--------+--------+--------+--------+
BI/DWH        |   R    |   R    |   R    |   R    |
              +--------+--------+--------+--------+

C = Create, R = Read, U = Update, D = Delete
```

---

## Construccion de la Matriz

### Paso 1: Listar entidades de datos

Del modelo conceptual de datos (4.1.1):
- Cliente
- Producto
- Pedido
- Factura
- Pago
- Inventario

### Paso 2: Listar aplicaciones

Del inventario de aplicaciones (4.2.1):
- Salesforce CRM
- SAP ERP
- Portal E-commerce
- App Movil
- Power BI
- Sistema de Facturacion

### Paso 3: Determinar operaciones

Para cada combinacion aplicacion-entidad, preguntar:
- **C**: Esta aplicacion crea registros de esta entidad?
- **R**: Esta aplicacion lee registros de esta entidad?
- **U**: Esta aplicacion actualiza registros de esta entidad?
- **D**: Esta aplicacion elimina registros de esta entidad?

---

## Ejemplo Completo

### Matriz CRUD Detallada

| Aplicacion | Cliente | Producto | Pedido | Linea Pedido | Factura | Pago | Inventario |
|------------|---------|----------|--------|--------------|---------|------|------------|
| Salesforce CRM | **C**RU | R | **C**R | **C**R | R | R | R |
| SAP ERP | RU | **C**RUD | RU | RU | **C**RUD | RU | **C**RUD |
| Portal Web | **C**R | R | **C**R | **C**R | R | - | R |
| App Movil | R | R | **C**R | **C**R | R | - | R |
| Sistema Facturacion | R | R | R | R | **C**RU | **C**RU | R |
| Power BI | R | R | R | R | R | R | R |
| ETL/DWH | R | R | R | R | R | R | R |

**Nota**: **C** en negrita indica sistema maestro (source of truth)

---

## Identificar Sistema Maestro

Cada entidad debe tener UN sistema maestro que es la fuente de verdad:

| Entidad | Sistema Maestro | Justificacion |
|---------|-----------------|---------------|
| Cliente | Salesforce CRM | Ventas es owner, procesos de negocio inician ahi |
| Producto | SAP ERP | Productos se definen en ERP con costos |
| Pedido | Portal/App | Origen del pedido es el canal digital |
| Factura | Sistema Facturacion | Requisitos fiscales, documento legal |
| Pago | Sistema Facturacion | Integrado con bancos |
| Inventario | SAP ERP | Gestion de almacenes |

### Patron de flujo de datos

```
CLIENTE:
Salesforce (Master) --> SAP --> BI
     |
     +--> Portal (replica solo lectura)

PEDIDO:
Portal/App (Master) --> Salesforce (oportunidad)
     |
     +--> SAP (fulfillment)
     |
     +--> BI (analitica)

PRODUCTO:
SAP (Master) --> Salesforce (catalogo ventas)
     |
     +--> Portal (catalogo web)
     |
     +--> BI (analitica)
```

---

## Analisis de la Matriz

### Detectar problemas

| Problema | Sintoma en Matriz | Riesgo |
|----------|-------------------|--------|
| Multiples masters | Varios C para misma entidad | Inconsistencia de datos |
| Datos huerfanos | Entidad sin C | Datos obsoletos |
| Silos de datos | Solo 1 app con R | Falta de integracion |
| Acoplamiento fuerte | App con CRUD en muchas entidades | Dificil de cambiar |

### Ejemplo de problema: Multiples masters

```
                Cliente
              +--------+
Salesforce    |   C    |  <-- Crea clientes B2B
              +--------+
Portal Web    |   C    |  <-- Crea clientes B2C
              +--------+
Call Center   |   C    |  <-- Crea clientes telefono
              +--------+

PROBLEMA: 3 sistemas crean clientes
- Duplicados entre sistemas
- Sin vision 360 del cliente
- Inconsistencia de datos

SOLUCION: Master Data Management (MDM)
- Definir UN sistema maestro
- O implementar MDM que consolide
```

---

## Uso para Planificar Integraciones

La matriz guia el diseno de integraciones:

```
Si Salesforce es master de Cliente,
y SAP necesita Read de Cliente:

    Salesforce     -->    SAP
    (C - Master)   sync   (R - Replica)

Integracion requerida:
- Tipo: Replicacion unidireccional
- Frecuencia: Tiempo real o batch?
- Campos: Cuales sincronizar?
- Conflictos: Salesforce siempre gana
```

### Matriz de Integraciones derivada

| Origen | Destino | Entidad | Tipo | Frecuencia |
|--------|---------|---------|------|------------|
| Salesforce | SAP | Cliente | Sync | Tiempo real |
| SAP | Salesforce | Producto | Sync | Cada hora |
| Portal | SAP | Pedido | Push | Tiempo real |
| SAP | BI | Todas | ETL | Nocturno |

---

## Evolucion: Baseline vs Target

### Baseline (actual)

| App | Cliente | Pedido |
|-----|---------|--------|
| CRM Legacy | CRU | - |
| Excel Ventas | CRU | CRU |
| ERP | R | CRU |

**Problemas**:
- Excel como sistema de pedidos
- Duplicacion de gestion de clientes

### Target (futuro)

| App | Cliente | Pedido |
|-----|---------|--------|
| Salesforce (nuevo) | **C**RU | - |
| Portal (nuevo) | R | **C**R |
| ERP | R | RU |

**Mejoras**:
- Salesforce es master de clientes
- Portal es origen de pedidos
- Excel eliminado

---

## Artefacto TOGAF

### Application/Data Matrix

```markdown
# Application/Data Matrix

## Metadata
- Version: 1.0
- Estado: Baseline
- Fecha: 2026-01-28
- Arquitecto: [Nombre]

## Matriz

[Tabla CRUD como se mostro arriba]

## Sistemas Maestros
| Entidad | Sistema Maestro | Owner |
|---------|-----------------|-------|
| Cliente | Salesforce | VP Ventas |
| Producto | SAP | Dir Productos |
| ... | ... | ... |

## Integraciones Requeridas
[Lista de integraciones derivadas]

## Issues Identificados
1. [Problema 1 y plan de remediacion]
2. [Problema 2 y plan de remediacion]
```

---

## Resumen

| Concepto | Descripcion |
|----------|-------------|
| Matriz CRUD | Relacion app-datos con operaciones |
| Sistema Maestro | Fuente de verdad para cada entidad |
| Analisis | Detectar duplicados, silos, acoplamientos |
| Integraciones | Derivar necesidades de sync |
| Evolucion | Comparar baseline vs target |

**Siguiente subtema**: Patrones de Integracion (4.2.3)
